{% extends 'base.html' %}
{% load static %}

{% block customcss %}
    <link rel="stylesheet" href="{% static 'style.css' %}">
{% endblock customcss %}

{% block content %}
<div class="container mt-3">
  <h2>ホーム</h2>
  <div class="container mt-4">
    <h5 class="mb-4">今日のITニュース</h5>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
      {% for item in news %}
      <div class="col">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <h5 class="card-title">{{ item.title }}</h5>
            <a href="{{ item.link }}" class="btn btn-primary mt-3" target="_blank">詳細を見る</a>
          </div>
          <div class="card-footer text-muted text-end">
            {{ item.time|date:"Y年m月d日 H:i" }}
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col text-center">
        <div class="alert alert-info w-100" role="alert">
          まだニュースはありません。
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div class="row">
    {% for item in object_list %}
    <div class="col-md-3">
      <div class="alert alert-success" role="alert">
         <p>カテゴリ：{{item.category}}</p>
         <p>タイトル：<a href="{% url 'snsapp:detail' item.pk %}">{{item.title}}</a></p>
         <p>投稿者：{{item.user.username}}</p>   
   
         {% if item.tag.all %}
         <p>
           ハッシュタグ:
           {% for tag in item.tag.all %}
              {% if tag.name %}
              <a href="{% url 'snsapp:tagged-posts' tag.name %}">#{{ tag.name }}</a>
              {% endif %}
              {% if not forloop.last %}, {% endif %}
           {% endfor %}
         </p>
         {% endif %}
   
         {% if request.user in item.like.all %}
         <a href="{% url 'snsapp:like-home' item.pk %}" class="like-btn add-color" tabindex="-1" role="button" aria-disabled="true"><i class="far fa-heart"></i></a>{{item.like.count}}
         {% else %}
         <a href="{% url 'snsapp:like-home' item.pk %}" class="like-btn" tabindex="-1" role="button" aria-disabled="true"><i class="far fa-heart"></i></a>{{item.like.count}}
         {% endif %}
   
         {% if item.user in connection.0.following.all %}
         <a href="{% url 'account:follow-home' item.pk %}" class="btn btn-danger ms-3" tabindex="-1" role="button" aria-disabled="true">フォロー解除</a>
         {% else %}
         <a href="{% url 'account:follow-home' item.pk %}" class="btn btn-primary ms-3" tabindex="-1" role="button" aria-disabled="true">フォロー</a>
         {% endif %}
   
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock content %}
